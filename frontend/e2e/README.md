# å…¬å¸æ¨¡å— Playwright è‡ªåŠ¨åŒ–æµ‹è¯•

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

æ­¤æµ‹è¯•å¥—ä»¶åŸºäºã€ŠCompany Testing Cases.mdã€‹ä¸­çš„40ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œä½¿ç”¨ Playwright å®ç°ç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚

## ğŸ—ï¸ æ–‡ä»¶ç»“æ„

```
tests/e2e/
â”œâ”€â”€ specs/                  # æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶
â”‚   â””â”€â”€ company-management.spec.ts
â”œâ”€â”€ pages/                  # é¡µé¢å¯¹è±¡æ¨¡å¼æ–‡ä»¶
â”‚   â””â”€â”€ CompanyPage.ts
â”œâ”€â”€ fixtures/               # æµ‹è¯•æ•°æ®
â”‚   â””â”€â”€ companies.json
â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ testData.ts
â”‚   â””â”€â”€ loginHelper.ts
â”œâ”€â”€ reports/                # æµ‹è¯•æŠ¥å‘Šè¾“å‡º
â”œâ”€â”€ screenshots/            # æµ‹è¯•æˆªå›¾
â””â”€â”€ videos/                 # æµ‹è¯•å½•åˆ¶è§†é¢‘
```

## ğŸ“Š æµ‹è¯•ç”¨ä¾‹è¦†ç›–

å·²å®ç°çš„æµ‹è¯•ç”¨ä¾‹ï¼š

- âœ… C001: å…¬å¸åˆ—è¡¨åŸºæœ¬æ˜¾ç¤º
- âœ… C002: å…¨é€‰åŠŸèƒ½éªŒè¯
- âœ… C003: é¡¶éƒ¨æŒ‰é’®æ˜¾ç¤º
- âœ… C004: æ¨¡ç³Šæœç´¢åŠŸèƒ½
- âœ… C005: åˆ†é¡µåŠŸèƒ½éªŒè¯
- âœ… C006: åˆ›å»ºå…¬å¸å¼¹çª—
- âœ… C007: Groupç±»å‹åˆ›å»º
- âœ… C008: Business Entityå…³è”éªŒè¯
- âœ… C010: å…¬å¸åç§°ä¸å¯ç¼–è¾‘
- âœ… C011: ç¼–è¾‘ç¡®è®¤åŠŸèƒ½
- âœ… C012: ç¼–è¾‘å–æ¶ˆåŠŸèƒ½
- âœ… C013: å•ä¸ªåˆ é™¤ç¡®è®¤
- âœ… C014: æ‰¹é‡åˆ é™¤åŠŸèƒ½
- âœ… C015: åˆ é™¤æ“ä½œéªŒè¯
- âœ… C016: å¯¼å…¥èœå•å¯è§æ€§
- âœ… C017: å¯¼å…¥å¯¹è¯æ¡†æ˜¾ç¤º
- âœ… C018: æ–‡ä»¶æ‹–æ”¾åŠŸèƒ½
- âœ… C019: æ–‡ä»¶æ ¼å¼æ”¯æŒ
- âœ… C027: åˆ—è¡¨æ’åºåŠŸèƒ½
- âœ… C029: åˆ›å»ºå¿…å¡«éªŒè¯
- âœ… C030: ç¼–è¾‘å¿…å¡«éªŒè¯
- âœ… C033: ç©ºåˆ—è¡¨æ˜¾ç¤º
- âœ… C040: åˆ›å»ºååˆ—è¡¨åˆ·æ–°

## ğŸš€ å®‰è£…å’Œè¿è¡Œ

### 1. å®‰è£…ä¾èµ–

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£… Playwright
npm install -D @playwright/test

# å®‰è£…æµè§ˆå™¨
npx playwright install
```

### 2. é…ç½®ç¯å¢ƒ

ç¡®ä¿ä»¥ä¸‹æœåŠ¡æ­£åœ¨è¿è¡Œï¼š
- å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼š`http://localhost:5173`
- åç«¯APIæœåŠ¡å™¨
- æ•°æ®åº“æœåŠ¡

### 3. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰å…¬å¸æ¨¡å—æµ‹è¯•
npx playwright test tests/e2e/specs/company-management.spec.ts

# ä»¥å¯è§†åŒ–æ¨¡å¼è¿è¡Œï¼ˆæ¨èç”¨äºè°ƒè¯•ï¼‰
npx playwright test tests/e2e/specs/company-management.spec.ts --ui

# è¿è¡Œç‰¹å®šæµ‹è¯•ç”¨ä¾‹
npx playwright test tests/e2e/specs/company-management.spec.ts -g "C001"

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
npx playwright show-report tests/e2e/reports/html-report
```

## ğŸ”§ æµ‹è¯•ç‰¹æ€§

### å®¹é”™è®¾è®¡
- æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½æœ‰ try-catch åŒ…è£…ï¼Œå¤±è´¥æ—¶è·³è¿‡è€Œä¸ä¸­æ–­æ•´ä¸ªæµ‹è¯•æµç¨‹
- è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºè°ƒè¯•å’Œé—®é¢˜è¿½è¸ª
- è‡ªåŠ¨æˆªå›¾å’Œè§†é¢‘å½•åˆ¶ï¼ˆå¤±è´¥æ—¶ï¼‰

### æ•°æ®éš”ç¦»
- ä½¿ç”¨æ—¶é—´æˆ³ç”Ÿæˆå”¯ä¸€çš„æµ‹è¯•æ•°æ®
- æµ‹è¯•å®Œæˆåè‡ªåŠ¨æ¸…ç†ï¼ˆå¯é€‰ï¼‰

### å¹¶è¡Œæ‰§è¡Œ
- é…ç½®äº†ä¸²è¡Œæ¨¡å¼ï¼ˆserialï¼‰ç¡®ä¿æµ‹è¯•é¡ºåº
- é¿å…æ•°æ®ç«äº‰é—®é¢˜

## ğŸ“ æµ‹è¯•é…ç½®

ä¸»è¦é…ç½®é¡¹ï¼ˆåœ¨ `playwright.config.js` ä¸­ï¼‰ï¼š

```javascript
{
  testDir: './specs',
  timeout: 300000,  // 5åˆ†é’Ÿè¶…æ—¶
  reporter: [
    ['html', { outputFolder: './reports/html-report' }],
    ['json', { outputFile: './reports/test-results.json' }],
    ['junit', { outputFile: './reports/junit-results.xml' }]
  ],
  use: {
    baseURL: 'http://localhost:5173',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure'
  }
}
```

## ğŸ› è°ƒè¯•æŒ‡å—

### å¸¸è§é—®é¢˜

1. **ç™»å½•å¤±è´¥**
   - æ£€æŸ¥ `utils/testData.ts` ä¸­çš„ç™»å½•å‡­æ®
   - ç¡®è®¤KeycloakæœåŠ¡æ­£å¸¸è¿è¡Œ

2. **å…ƒç´ å®šä½å¤±è´¥**
   - ä½¿ç”¨ `--debug` æ¨¡å¼è¿è¡Œæµ‹è¯•
   - æ£€æŸ¥é¡µé¢æ˜¯å¦å®Œå…¨åŠ è½½

3. **æµ‹è¯•è¶…æ—¶**
   - å¢åŠ  `waitForTimeout` æ—¶é—´
   - æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒæœåŠ¡å™¨å“åº”æ—¶é—´

### è°ƒè¯•å‘½ä»¤

```bash
# è°ƒè¯•æ¨¡å¼
npx playwright test --debug

# ç”Ÿæˆæµ‹è¯•ä»£ç 
npx playwright codegen http://localhost:5173

# æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
npx playwright show-report
```

## ğŸ“ˆ æ‰©å±•æµ‹è¯•

è¦æ·»åŠ æ–°çš„æµ‹è¯•ç”¨ä¾‹ï¼š

1. åœ¨ `specs/company-management.spec.ts` ä¸­æ·»åŠ æ–°çš„æµ‹è¯•å‡½æ•°
2. ä½¿ç”¨ `CompanyPage` ç±»ä¸­çš„æ–¹æ³•è¿›è¡Œé¡µé¢æ“ä½œ
3. åœ¨ `fixtures/companies.json` ä¸­æ·»åŠ æµ‹è¯•æ•°æ®
4. æ›´æ–°æ­¤READMEæ–‡æ¡£

## ğŸ”„ æŒç»­é›†æˆ

æµ‹è¯•å¯ä»¥é›†æˆåˆ°CI/CDæµæ°´çº¿ä¸­ï¼š

```yaml
- name: Run Playwright Tests
  run: |
    cd frontend
    npm ci
    npx playwright install --with-deps
    npx playwright test tests/e2e/specs/company-management.spec.ts
``` 